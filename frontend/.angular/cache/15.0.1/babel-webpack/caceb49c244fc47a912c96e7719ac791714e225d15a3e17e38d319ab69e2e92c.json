{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ProfilePageComponent = class ProfilePageComponent {\n  constructor(authService, sproviderService, snackBar, postService, activatedRoute, router) {\n    this.authService = authService;\n    this.sproviderService = sproviderService;\n    this.snackBar = snackBar;\n    this.postService = postService;\n    this.activatedRoute = activatedRoute;\n    this.router = router;\n  }\n  ngOnInit() {\n    //get id from url\n    let idUrl;\n    this.activatedRoute.params.subscribe(params => {\n      idUrl = params['id'];\n    });\n    //test if connected ==true and  idUrl is == idToken\n    if (this.authService.isUserLoggedIn(idUrl)) {\n      this.sproviderService.getById(idUrl).subscribe(user => {\n        this.sprovider = user;\n        this.logo = `../../../../assets/img/` + this.sprovider.logo;\n        console.log(this.sprovider.id);\n        this.postService.getPostsBySProvider(this.sprovider.id).subscribe(data => {\n          this.posts = data;\n          console.log(\"posts at profile \", this.posts);\n        });\n      });\n    } else {\n      this.router.navigate(['**']);\n    }\n  }\n  edit() {\n    this.snackBar.open('edit post', 'edit', {\n      duration: 3000\n    });\n  }\n  delete(id) {\n    const snackbarRef = this.snackBar.open('would you like to delete this post ?', \"delete\", {\n      duration: 3000\n    });\n    snackbarRef.onAction().subscribe(() => {\n      this.postService.deletePost(id).subscribe(() => {\n        this.postService.getPostsBySProvider(this.sprovider.id).subscribe(data => {\n          this.posts = data;\n          console.log(\"posts at profile \", this.posts);\n        });\n      });\n    });\n  }\n};\nProfilePageComponent = __decorate([Component({\n  selector: 'app-profile-page',\n  templateUrl: './profile-page.component.html',\n  styleUrls: ['./profile-page.component.css']\n})], ProfilePageComponent);\nexport { ProfilePageComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}